<!DOCTYPE html>
<html>
<head>
    <title>History</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body style="background-color: beige;">

<div class="header">
    <h1>College Library Management System</h1>
</div>

<div class="navigation">
    <nav>
        <ul>
            <li><h3><a href="{{ url_for('home') }}">Home</a></h3></li>|
            <li><h3><a href="{{ url_for('students') }}">Students</a></h3></li>|
            <li><h3><a href="{{ url_for('books') }}">Books</a></h3></li>|
            <li><h3><a href="{{ url_for('borrowreturn') }}">Borrow/Return</a></h3></li>

        <div style="text-align:center; margin-top:10px;">
            <a href="{{ url_for('borrow_logs') }}"><button type="button">View All Borrow Logs</button></a>
        </div>


        </ul>
    </nav>
</div>

<!-- Flash messages -->
{% with messages = get_flashed_messages() %}
  {% if messages %}
    <ul style="color: green; text-align: center; list-style-type: none; padding: 10px;">
      {% for message in messages %}
        <li>{{ message }}</li>
      {% endfor %}
    </ul>
  {% endif %}
{% endwith %}

<div class="header-option">
    <h2>History</h2>
</div>

<div>
<center>
    <!-- Student Borrow History Form -->
    <ul>
    <form action="/history" method="POST">
        <li><input type="text" id="student_id" name="student_id" placeholder="*Enter Student ID" required></li><br><br>
        <li><button type="reset">Reset</button>   <button type="submit">Get Details</button></li><br>
    </form>
    </ul>

    <!-- Student Borrow History Table -->
    {% if history and not show_logs %}
    <h3>Borrow History</h3>
    <table border="1" cellpadding="5">
        <tr>
            <th>Borrow ID</th>
            <th>Book ID</th>
            <th>Borrow Date</th>
            <th>Return Date</th>
        </tr>
        {% for row in history %}
        <tr>
            <td>{{ row.borrow_id }}</td>
            <td>{{ row.book_id }}</td>
            <td>{{ row.borrow_date }}</td>
            <td>{{ row.return_date or 'Not Returned' }}</td>
        </tr>
        {% endfor %}
    </table>
    {% endif %}


    <!-- Borrow Logs Table -->
{% if history and show_logs=='borrow_logs' %}
<h3>Borrow Logs</h3>
<table border="1" cellpadding="5">
    <tr>
        <th>Borrow ID</th>
        <th>Student ID</th>
        <th>Book ID</th>
        <th>Borrow Date</th>
        <th>Return Date</th>
    </tr>
    {% for log in history %}
    <tr>
        <td>{{ log.borrow_id }}</td>
        <td>{{ log.student_id }}</td>
        <td>{{ log.book_id }}</td>
        <td>{{ log.borrow_date }}</td>
        <td>{{ log.return_date or 'Not Returned' }}</td>
    </tr>
    {% endfor %}
</table>
{% endif %}



</center>
</div>

</body>
</html>
